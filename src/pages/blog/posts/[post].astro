---
import Layout from "../../../layouts/Layout.astro";
import PostPage from "../../../components/svelte/Page/PostPage.svelte";

export function getStaticPaths() {
  const posts = Object.values(
    import.meta.glob("./md/*.md", { eager: true })
  );
  
  let arrPost: { params: { post: string } }[] = [];
  for (let i = 0; i < posts.length; i++) {
    arrPost.push({ params: { post: posts[i].url.slice(posts[i].url.lastIndexOf("/") + 1) } });
  }
  return arrPost;
}

const posts = Object.values(
    import.meta.glob("./md/*.md", { eager: true })
);

const { post } = Astro.params;

let currentMd = await import(`./md/${post}.md`).then((obj) => {
  return obj;
});

let content = await currentMd.compiledContent()

---

<Layout>
  <PostPage client:load post={currentMd} content={content} listPost={posts}/>
</Layout>
